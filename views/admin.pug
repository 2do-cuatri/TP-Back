doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title Menú Administrador
        link(rel="stylesheet", href="/static/css/styles.css")
        script(src="/static/scripts/admin.js", type="text/javascript") 
        script(src="/static/scripts/order.js", type="text/javascript") 
        script(src='/static/scripts/handleCategories.js', type="text/javascript", defer)
    body 
        h1 Menú Administrador 

        //Sección para agregar productos
        section#add-product
            h2 Agregar productos 
            form(method="post", action=`/products?userId=${userId}`)
        
                div 
                    label(for="category") Categoría: 
                    input(type="text" name="category")
                
                div 
                    label(for="name") Nombre: 
                    input(type="text" name="name")
                
                div 
                    label(for="price") Precio: 
                    input(type="number" name="price")
                
                div 
                    label(for="stock") Stock: 
                    input(type="number" name="stock")
                
                div 
                    label(for="description") Descripción: 
                    input(type="text" name="description")

                button(type="submit") Agregar producto

        //Sección para ver y eliminar productos
        h3 Filtros por categorias
        ul#categorias
            each category in categories
                li
                    button(onclick=`setCategory('${category}')`, data-cat=category) #{category}
            if categories.length > 0
                li
                    button#clean(onclick='setCategory()') Limpiar filtros
        h3 Productos
        if products.length == 0
            p(style="color:red;align-text:center;font-size:large;font-weight:bold") Ningun producto coincide con su busqueda
        section#delete-product
            h2 Eliminar productos
             ul(id="product_list")
                 each product in products
                    // funcion js para eliminar productos 
                    li
                        h2= product.name
                        p Categoría: #{product.category}
                        p Precio: $#{product.price}
                        button(type="button", onclick=`eliminarProducto('${product._id}')`) Eliminar producto
                        
        //Sección para ver usuarios
        section#user-list
            h2 Lista de usuarios
            table 
                thead 
                    tr 
                        th ID
                        th Email 
                        th Rol
                tbody 
                    each user in users
                        tr 
                            td= user._id 
                            td= user.email 
                            td= user.rol 
                    

        //Sección para ver órdenes
        section#orders
            h2 Lista de órdenes
            table
                thead 
                    tr
                        th Orden ID
                        th Fecha
                        th Monto
                        th Estado
                      
                tbody             
                    each order in orders
                        - date = order.date.toLocaleString();
                        tr
                            td= order._id
                            td= date
                            td= order.payment
                            td  
                                label(id=`label-${order._id}`)= `${order.status}`                               
                                select(id=`select-${order._id}`)
                                    option(value="procesando", selected=order.status === 'procesando') Procesando
                                    option(value="enviado", selected=order.status === 'enviado') Enviado
                                    option(value="cancelado", selected=order.status === 'cancelado') Cancelado
                                button(onclick=`changeStatus('${order._id}')`) Cambiar Estado